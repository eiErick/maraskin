<app-header title="Almoço" [load]="loadMenu()"/>

<ion-content>
  <ion-list [inset]="true">
    @for (lunch of lunches(); track $index) {
      <ion-item class="ion-no-padding">
        <div class="lunch">
          <span class="name">{{ lunch.name }}</span>
          <div class="actions">
            <span class="material-symbols-outlined" id="open-modal" expand="block" (click)="openEditLunch(lunch)">edit</span>
            <span class="material-symbols-outlined" (click)="presentDeleteConfirm(lunch)">delete</span>
          </div>
        </div>
      </ion-item>
    }
  </ion-list>

  <ion-button (click)="openCreateLunch()">
    <ion-icon name="add" />
  </ion-button>

  <ion-modal #modal trigger="open-modal" [isOpen]="isModalOpen" (ionModalDidDismiss)="closeModal()" [presentingElement]="presentingElement">
    <ng-template>
      <ion-header class="ion-no-border">
        <ion-toolbar>
          <ion-buttons slot="start">
            <ion-button (click)="cancelModal()">
              <ion-icon name="close"/>
            </ion-button>
          </ion-buttons>
          <ion-title>{{ selLunch.name.length === 0 ? 'Criar almoço' : selLunch.name }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="confirmModal()">
              <ion-icon name="checkmark"/>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content class="ion-padding">
        <form formLunch="ngForm" class="formLunch">
          <ion-item class="ion-no-padding">
            <ion-input type="text" fill="solid" label="Nome da almoço" labelPlacement="floating" required [(ngModel)]="selLunch.name" name="name" />
          </ion-item>

          <ion-item class="ion-no-padding">
            <ion-input type="number" fill="solid" label="Calorias" labelPlacement="floating" required [(ngModel)]="selLunch.calories" name="calories" />
          </ion-item>

          <ion-item class="ion-no-padding">
            <ion-input type="number" fill="solid" label="Carboidratos" labelPlacement="floating" required [(ngModel)]="selLunch.carbohydrates" name="carbohydrates" />
          </ion-item>

          <ion-item class="ion-no-padding">
            <ion-input type="number" fill="solid" label="Glicose" labelPlacement="floating" required [(ngModel)]="selLunch.glucose" name="glicose" />
          </ion-item>

          <ion-item class="ion-no-padding">
            <ion-toggle [(ngModel)]="selLunch.lactose" name="lactose">Lactose</ion-toggle>
          </ion-item>
        </form>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>